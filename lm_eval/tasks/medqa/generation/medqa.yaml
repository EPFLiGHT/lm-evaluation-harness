task: medqa_4options_generation
dataset_path: GBaker/MedQA-USMLE-4-options-hf
output_type: generate_until
training_split: train
validation_split: validation
test_split: test
#doc_to_text: !function preprocess_medqa.doc_to_text
doc_to_text: "Q: {{sent1}}\n (A) {{ending0}} (B) {{ending1}} (C) {{ending2}} (D) {{ending3}}\nA: Provide the final answer enclosed in boxed{the_answer}."
doc_to_target: "{{['A', 'B', 'C', 'D'][label]}}" #!function preprocess_medqa.doc_to_target
# doc_to_choice: [ 'A', 'B', 'C', 'D' ]
filter_list:
  - name: "strict-match"
    filter:
      - function: "regex"
        regex_pattern: (?i)answer\W(?:is)*\W*([A-D])(?:\W|$)|(?:answer|boxed)?{\W*([A-D])\W+
      - function: "take_first"
generation_kwargs:
  until:
    - "</s>"
    - "Q:"
    - "<|im_end|>"
    - "<|end_of_text|>"
  do_sample: false
  temperature: 0.0
metric_list:
  - metric: exact_match
    aggregation: mean
    higher_is_better: true
    ignore_case: true
    ignore_punctuation: true